<!DOCTYPE HTML>
<html>

<head>
    <title>vli</title>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="keywords" content="vli">
    <meta name="description" content="vli">
    <LINK rel="Bookmark" href="favicon.ico">
    <LINK rel="Shortcut Icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="plugin/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="plugin/Hui-iconfont/1.0.8/iconfont.min.css" />
    <link rel="stylesheet" type="text/css" href="css/common.css" />
    <link rel="stylesheet" type="text/css" href="plugin/pifu/pifu.css" />
    <link rel="stylesheet" type="text/css" href="plugin/wangEditor/css/wangEditor.min.css">
    <script
        type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } function showSide(){$('.navbar-nav').toggle();}</script>
</head>
<style>
    [v-cloak] {
        display: none !important;
    }
</style>

<body>
    <div id="app" v-cloak>
        <!--顶部样式-->
        <topnav></topnav>
        <!--导航条-->
        <!-- <nav class="breadcrumb">
            <div class="container"> <i class="Hui-iconfont">&#xe67f;</i> <a href="index.html" class="c-primary">首页</a>
                <span class="c-gray en">&gt;</span> <span class="c-gray">文章</span> <span class="c-gray en">&gt;</span>
                <span class="c-gray">个人博客应该选择什么样的域名和域名后缀</span></div>
        </nav> -->
        <section class="container pt-20">
            <div class="row w_main_row">
                <div class="col-lg-9 col-md-9 w_main_left">
                    <div class="panel panel-default  mb-20">
                        <div class="panel-body pt-10 pb-10">
                            <h2 class="c_titile">{{articleDetails.title}}</h2>
                            <p class="box_c"><span class="d_time">发布时间：{{articleDetails.createTime}}</span><span>作者：<a
                                        href="mailto:wfyv@qq.com">{{articleDetails.userName}}</a></span><span>阅读（{{articleDetails.viewNum}}）</span>
                            </p>
                            <ul class="infos">
                                <p>{{articleDetails.introduce}}
                                </p>
                                <span v-html="articleDetails.content">{{articleDetails.content}}</span>
                            </ul>
                            <div class="keybq">
                                <p><span>关键字</span>：<a class="label label-default">个人博客</a><a
                                        class="label label-default">阿里云</a><a class="label label-default">空间</a></p>
                            </div>
                            <div class="nextinfo">
                                <p class="last">上一篇：<a href="#">免费收录网站搜索引擎登录口大全</a></p>
                                <p class="next">下一篇：<a href="#">javascript显示年月日时间代码</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default  mb-20">
                        <div class="tab-category">
                            <a href=""><strong>评论区</strong></a>
                        </div>
                        <div class="panel-body">
                            <div class="panel-body" style="margin: 0 3%;">
                                <div class="mb-20">
                                    <ul class="commentList">
                                        <li class="item cl" v-for="v in comments.data" :key="v.id"> <a href="#"><i
                                                    class="avatar size-L radius"><img alt=""
                                                        :src="v.headPortrait"></i></a>
                                            <div class="comment-main">
                                                <header class="comment-header">
                                                    <div class="comment-meta"><a class="comment-author"
                                                            href="#">{{v.nickName}}</a>
                                                        <time class="f-r">{{v.createTime | formatDate}}</time>
                                                    </div>
                                                </header>
                                                <div class="comment-body">
                                                    <p> {{v.content}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <!-- <li class="item cl"> <a href="#"><i class="avatar size-L radius"><img alt=""
                                                        src="http://qzapp.qlogo.cn/qzapp/101388738/696C8A17B3383B88804BA92ECBAA5D81/100"></i></a>
                                            <div class="comment-main">
                                                <header class="comment-header">
                                                    <div class="comment-meta"><a class="comment-author" href="#">老王</a>
                                                        <time title="2014年8月31日 下午3:20" datetime="2014-08-31T03:54:20"
                                                            class="f-r">2014-8-31 15:20</time>
                                                    </div>
                                                </header>
                                                <div class="comment-body">
                                                    <p> +1</p>
                                                </div>
                                            </div>
                                        </li> -->

                                    </ul>

                                </div>
                                <div class="line"></div>
                                <!--用于评论-->
                                <div class="mt-20" id="ct">
                                    <!-- <div id="err" class="Huialert Huialert-danger hidden radius">成功状态提示</div> -->
                                    <textarea v-model="comment.content" style="height:200px;width: 825px;"
                                        placeholder="看完不留一发？"></textarea>
                                    <div class="text-r mt-10">
                                        <label class="m_flo">QQ 号：</label>
                                        <input type="text" placeholder="必填" v-model="comment.qqNumber"
                                            @blur="getQqInformation">
                                        <label>昵 称：</label>
                                        <input type="text" placeholder="必填" v-model="comment.nickName">
                                        <label class="m_flo">邮 箱：</label>
                                        <input type="text" placeholder="必填"
                                            v-model="comment.mail">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
                                        <label>注：(输入QQ号自动获取昵称、邮箱和头像！)</label>
                                        <button @click.prevent="onSubComment" class="btn btn-primary radius">
                                            发表评论</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3">
                    <!--热门推荐-->
                    <div class="bg-fff box-shadow radius mb-20">
                        <div class="tab-category">
                            <a href=""><strong>热门推荐</strong></a>
                        </div>
                        <div class="tab-category-item">
                            <ul class="index_recd">
                                <li>
                                    <a href="#">阻止a标签href默认跳转事件</a>
                                    <p class="hits"><i class="Hui-iconfont" title="点击量">&#xe622;</i> 276 </p>
                                </li>
                                <li>
                                    <a href="#">PHP面试题汇总</a>
                                    <p class="hits"><i class="Hui-iconfont" title="点击量">&#xe622;</i> 276 </p>
                                </li>
                                <li>
                                    <a href="#">阻止a标签href默认跳转事件</a>
                                    <p class="hits"><i class="Hui-iconfont" title="点击量">&#xe622;</i> 276 </p>
                                </li>
                                <li>
                                    <a href="#">阻止a标签href默认跳转事件</a>
                                    <p class="hits"><i class="Hui-iconfont" title="点击量">&#xe622;</i> 276 </p>
                                </li>
                                <li>
                                    <a href="#">PHP面试题汇总</a>
                                    <p class="hits"><i class="Hui-iconfont" title="点击量">&#xe622;</i> 276 </p>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!--图片-->
                    <div class="bg-fff box-shadow radius mb-20">
                        <div class="tab-category">
                            <a href=""><strong>扫我关注</strong></a>
                        </div>
                        <div class="tab-category-item">
                            <img data-original="temp/gg.jpg" class="img-responsive lazyload" alt="响应式图片">
                        </div>
                    </div>

                </div>
            </div>

        </section>
        <footer class="footer mt-20">
            <p>Copyright &copy;2017 wfyvv.com All Rights Reserved. <br>
                <a href="http://www.miitbeian.gov.cn/" target="_blank" rel="nofollow">皖ICP备17002922号</a> 更多模板：<a
                    href="http://www.mycodes.net/" target="_blank">源码之家</a><br>
            </p>
        </footer>
    </div>
</body>

</html>
<script src="js/vuejs-2.5.16.js"></script>
<script src="js/axios-0.18.0.js"></script>
<script src="js/api.js"></script>
<script src="js/Top.js"></script>
<script type="text/javascript" src="plugin/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="plugin/layer/3.0/layer.js"></script>
<script type="text/javascript" src="plugin/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="plugin/pifu/pifu.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="plugin/wangEditor/js/wangEditor.min.js"></script>
<script type="text/javascript">
    $(function () { $(window).on("scroll", backToTopFun); backToTopFun(); });

</script>

<script>
    new Vue({
        el: "#app",
        data: {
            articleDetails: {
                id: "",
                createTime: "",
                title: "",
                introduce: "",
                content: "",
                userId: "",
                userName: "",
                viewNum: "",
                commentNum: "",
                typeId: "",
                homePic: ""

            },
            comment: {
                articleId: "",
                headPortrait: "",
                qqNumber: "",
                nickName: "",
                mail: "",
                content: "",
                createTime: ""
            },
            comments: [{}],
        },
        methods: {
            //点击展示文章
            onDetailsShow: function () {
                let _this = this;
                let params = {
                    "articleId": getQueryString("id")
                }
                //通过文章id查询文章详情
                findArticleById(params).then(res => {
                    if (res.data.code == 1) {
                        _this.articleDetails = res.data.data;
                    }
                })
                //查询评论
                getListComment(params).then(res => {
                    if (res.data.code == 1) {
                        _this.comments = res.data.data;
                    } else {
                        alert(res.data.msg);
                    }
                })
            },
            //获取QQ信息
            getQqInformation: function () {
                let _this = this;
                let params = {
                    qqNumber: _this.comment.qqNumber
                }
                getQqInformation(params).then(res => {
                    console.info(res);
                    if (res.data.code == 1) {
                        _this.comment = res.data.data;
                    }
                });
            },
            //提交评论
            onSubComment: function () {
                let _this = this;
                _this.comment.articleId = getQueryString("id");
                onSubComment(_this.comment).then(res => {
                    if (res.data.code == 1) {
                        alert("评论成功！");
                        getListComment({ "articleId": getQueryString("id") }).then(res => {
                            if (res.data.code == 1) {
                                _this.comments = res.data.data;
                            }
                        })
                        _this.comment = {};
                    } else {
                        alert(res.data.msg);
                    }
                });
            },
        },
        created: function () {
            let _this = this;
            _this.onDetailsShow();
        },
        filters: {
            formatDate: function (value) {
                let date = new Date(value);
                let y = date.getFullYear();
                let MM = date.getMonth() + 1;
                MM = MM < 10 ? ('0' + MM) : MM;
                let d = date.getDate();
                d = d < 10 ? ('0' + d) : d;
                let h = date.getHours();
                h = h < 10 ? ('0' + h) : h;
                let m = date.getMinutes();
                m = m < 10 ? ('0' + m) : m;
                let s = date.getSeconds();
                s = s < 10 ? ('0' + s) : s;
                return y + '-' + MM + '-' + d + ' ' + h + ':' + m + ':' + s;
            }
        }
    })
    //获取地址栏参数
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
</script>